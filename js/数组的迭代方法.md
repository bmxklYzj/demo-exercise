# 数组的迭代方法

数组的迭代方法

注意：他们都不改变原数组！

```js
forEach
map
every
some
filter
reduce
```

1. forEach 循环数组中的每一项，没有返回值
2. map 循环数组中的每一项，并返回新的数组，如果没有return，新数组的所有元素都是 undefined
3. every 返回值是 true/false ，所有元素都满足条件返回true才返回true， 遇到fasle则返回false
4. some 和every相反。返回值是 true/false ，一旦遇到一个元素返回true则返回true， 全部都是fasle则返回false
5. filter 返回所有满足条件的数组
6. 参数是 `prev, cur, index, arr`

## filter 的用处举例

1. 筛选奇数

```js
let arr = [1, 2, 3, 4, 5, 6];
let res = arr.filter(item => item % 2);
console.log(arr, res);
```

2. 数组去重

```js
let arr = [1, 2, 3, 4, 5, 6, 3, 4, 5];
let res = arr.filter((item, index, array) =>
    array.indexOf(item) === index
);
console.log(arr, res);
// [ 1, 2, 3, 4, 5, 6, 3, 4, 5 ] [ 1, 2, 3, 4, 5, 6 ]
```

3. 去除 纯空字符串，注意是纯！(注意 filter 返回的数组只能是 原数组的子集！而不能对数组元素进行任何操作，是无效的。他的回调函数只能是返回true/false)

```js
// 去除 纯空字符串，注意是纯！
let arr = ['a', 'b', '', null, undefined, NaN, '  c  ', '   '];
console.log(arr);
let res = arr.filter(item => {
    return (item && item.trim());
});
console.log(arr, res);
// [ 'a', 'b', '', null, undefined, NaN, '  c  ', '   ' ] [ 'a', 'b', '  c  ' ]
```

4. 模拟 filter 函数

```js
let arr = [1, 2, 3];

function filterArray(arr, callback) {
    let temp = [];
    arr.map(item => {
        if (callback(item)) {
            temp.push(item);
        }
    });

    return temp;
}

function isBigEnough(val) {
    return val > 1;
}

console.log(filterArray(arr, isBigEnough));
```

reference:
1. http://zerosoul.github.io/2016/12/06/array-filter-map-reduce-in-js/
2. http://zerosoul.github.io/2016/11/29/array-filter-trick/
