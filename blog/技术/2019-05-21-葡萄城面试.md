# 葡萄城

## [先是挑一道笔试题](https://www.grapecity.com.cn/career/challenge)，[我选的日历，贴近前端且需要一定的算法基础递归](https://github.com/bmxklYzj/demo-exercise/tree/master/2019-05/calendar)做，提交review后约当面面试

## 当面面试先是hr了解大体情况，接着是一位十年经验的前端，主要问前端知识

Q：说一下熟悉的项目，遇到了什么技术难题，你做了什么

A：我说了一些小程序中的项目情况：主要解决video的全屏bug，video多实例支持唯一id，统一NA组件的创建时序，解决过的一些棘手bug比如video autoplay、小米机型不触发touchend、'use strict'导致的调试问题（漏掉了内核setTimeout不执行）。这其中顺带说了vue的响应式原理、父子组件的生命周期。


Q：了解数据库吗？数据库怎么存储的

A：mongodb中有db、collection、document分别对应mysql中的db、table、一行。怎么存储不清楚


Q：智力题：给两个矩形，怎么判断两个矩形相交

A：
```js
    (r1.left < r2.left && r1.right > r2.left)
&& top/bottom ...
```
Q：但这样你得先判断r1哪个在左

A：确实

Q：是否可以换种思路，判断不相交？

A：
```js
!(r1.right < r2.left || r1.left > r2.right)
```
这中间得到最终结果我比较懵，全程面试官引导我，还让我用线段是否相交来举例。

## 下午1:30到工作区笔试

1. 上来出了一道题：给定一个整数，在console中用`*`号输出，最后的输出只能有5行，例如1输出为

    ```
    *   ...
    *   ...
    *   ...
    *   ...
    *   ...
    *   ...
    ```

    我一想，如果输出2该怎么办，曲线怎么画？于是我问能不能用数字表的那种格式表示，答可以。

    第一版没有对入参的类型进行处理，虽然结果正确但逻辑有点问题，多余了一次循环和一个中间数组。最终版本：

    ```js
    const numberPatternConfig = {
        0: [
            '*****',
            '*   *',
            '*   *',
            '*   *',
            '*****'
        ],
        1: [
            '  *  ',
            '  *  ',
            '  *  ',
            '  *  ',
            '  *  '
        ],
        2: [
            '*****',
            '    *',
            '*****',
            '*    ',
            '*****'
        ],
        3: [
            '*****',
            '    *',
            '*****',
            '    *',
            '*****'
        ],
        4: [
            '*   *',
            '*   *',
            '*****',
            '    *',
            '    *'
        ],
        5: [
            '*****',
            '*    ',
            '*****',
            '    *',
            '*****'
        ],
        6: [
            '*****',
            '*    ',
            '*****',
            '*   *',
            '*****'
        ],
        7: [
            '*****',
            '    *',
            '    *',
            '    *',
            '    *'
        ],
        8: [
            '*****',
            '*   *',
            '*****',
            '*   *',
            '*****'
        ],
        9: [
            '*****',
            '*   *',
            '*****',
            '    *',
            '*****'
        ]
    };

    function printPatternToConsole(n) {
        // 注意对入参的处理
        n += '';
        n = n.trim();
        if (!/^\d+$/.test(n)) {
            throw new Error('n must be a integer');
        }

        let res = '';
        for (let i = 0; i < 5; i++) {
            for (let j = 0; j < n.length; j++) {
                res += numberPatternConfig[n[j]][i] + ' ';
            }
            res += '\n';
        }

        console.log(res);
    }

    printPatternToConsole(253);
    ```

2. 如何统计一个城市中的井盖数，我说了大概7、8种
    - 在市中心、郊区多地抽样统计一个地方数目，并推测全局
    - 从井盖制造商卖出多少井盖来统计
    - 从回收站回收多少井盖
    - 卫星从天上拍照统计
    - 从百度地图的全局地图图片中统计
    - 如果我足够有钱，可以发起招募令，正确报告一个井盖位置有奖励
    - 在地下官网中放机器人遍历
3. 电梯运行逻辑：电梯怎么判断停不停